define("expenseCenter/orderManage/orderManage-tpl",["angular"],function(e){window.$global.$templateCache.put("scripts/expenseCenter/orderManage/views/order.html",'<div ui-view="orderView"></div>'),window.$global.$templateCache.put("scripts/expenseCenter/orderManage/views/orderDetail.html",'<div class="row" bindonce data-spm="142"><div class="col-sm-12"><div class="console-title console-title-border clearfix"><div class="pull-left"><h5><span bo-bind="\'order.views.orderdetail.orderId\'|translate"></span><!-- 订单编号 -->：<span ng-bind="vm.order.orderId"></span></h5><a class="btn btn-xs btn-default" href="javascript:;" ng-click="vm.goBack()" aliyun-console-spm spm-id="1"><span class="icon-goback"></span><span bo-bind="\'order.views.orderdetail.goback\'|translate"></span><!-- 返回 --> {{vm.fromText}}</a></div></div><div class="row margin-top-3"><div class="col-sm-12"><div ng-if="vm.order.orderStatus" class="alert alert-info" ng-class="{\'alert-warning\':vm.order.orderStatus ===\'UNPAID\'}"><span><span bo-bind="\'order.views.orderdetail.orderstatus\'|translate"></span><!-- 订单状态 -->：</span> <span ng-if="vm.order.orderParams.showLogisticsParam == null"><span ng-bind-html="vm.order.orderStatus|orderStatusFilter:\'order\'"></span></span> <span ng-if="vm.order.orderParams.showLogisticsParam != null"><span class="nowrap text-success" bo-text="vm.order.orderParams.showLogisticsStatus"></span></span> <span ng-if="vm.order.orderStatus ===\'UNPAID\'">{{vm.endlineNotice}}</span></div></div></div><div class="row margin-top"><div class="col-sm-12"><div class="basic-group-info"><div class="console-sub-title clearfix"><div class="pull-left" style="margin-top:10px"><h5><span bo-bind="\'order.views.orderdetail.orderInfo\'|translate"></span><!-- 订单概要 --></h5></div></div><table ng-if="!vm.loadingState" class="table table-bordered"><tr><td style="width:50%"><span class="form-label"><span bo-bind="\'order.views.orderdetail.orderId\'|translate"></span><!-- 订单编号 -->：</span> <span class="value" bo-text="vm.order.orderId"></span></td><td style="width:50%"><span class="form-label"><span bo-bind="\'order.views.orderdetail.orderType\'|translate"></span><!-- 订单类型 -->：</span> <span class="value" bo-text="vm.order.orderType|orderStatusFilter:\'orderType\'"></span></td></tr><tr><td><span class="form-label"><span bo-bind="\'order.views.orderdetail.createTime\'|translate"></span><!-- 创建时间 -->：</span> <span class="value" bo-text="vm.order.gmtCreate|aliyunDateFormatter"></span></td><td><span class="form-label"><span bo-bind="\'order.views.orderdetail.payTime\'|translate"></span><!-- 支付时间 -->：</span> <span ng-if="vm.order.orderStatus ===\'PAID\'" class="value" bo-text="vm.order.gmtPay|aliyunDateFormatter"></span> <span ng-if="vm.order.orderStatus !==\'PAID\'" class="value">-</span></td></tr><tr ng-if="vm.order.orderType ==\'REMEDY\'"><td colspan="2"><span class="form-label"><span bo-bind="\'order.views.orderdetail.reason\'|translate"></span><!-- 补偿续费原因 -->：</span> <span class="value" bo-text="vm.order.remark || \'-\'"></span></td></tr><tr><td colspan="2"><span class="form-label"><span bo-bind="\'order.views.orderdetail.payStatus\'|translate"></span><!-- 支付状态 -->：</span> <span pay-status-for-order-manage order="vm.order"></span> <span ng-if="vm.order.orderStatus ===\'PAID\'||vm.order.orderStatus===\'REFUND\'"><span data-spm-click="gostr=/aliyun;locaid=d{{vm.showChargeFlow?\'3\':\'2\'}}" ng-click="vm.showDetail()" class="pull-right no-text-select" style="cursor:pointer"><span ng-bind="vm.expandChargeFlowText"></span> <span class="extend-btn" ng-class="{\'icon-down\':!vm.showChargeFlow,\'icon-up\':vm.showChargeFlow}"></span></span></span> <span class="pull-right order-status" ng-if="vm.order.orderStatus ===\'UNPAID\'"><a aliyun-console-spm="4" href="javascript:;" ng-href="{{vm.payUrl}}" target="_blank" class="btn btn-primary btn-sm"><span bo-bind="\'order.views.orderdetail.paynow\'|translate"></span><!-- 立即支付 --></a> <a aliyun-console-spm="5" href="javascript:;" cancel-order order="vm.order" class="btn btn-default btn-sm"><span bo-bind="\'order.views.orderdetail.cancelorder\'|translate"></span><!-- 作废订单 --></a></span></td></tr><tr ng-if="vm.showChargeFlow"><td colspan="2"><div charge-flow-list-of-order-manage biz-type="order" show-charge-flow="vm.showChargeFlow" raw-data="vm.order"></div></td></tr></table><div ng-if="vm.loadingState" aliyun-loading size="48" style="margin-top:50px"></div><div ng-if="vm.loadingState" style="height:50px"></div></div><!-- 物流信息 --><span ng-if="vm.order.orderParams.showLogisticsParam != null"><div class="basic-group-info"><div class="console-sub-title clearfix"><div class="pull-left" style="margin-top:10px"><h5><span bo-bind="\'order.views.orderdetail.receiverDetail\'|translate"></span><!-- 收货详情 --></h5></div><span ng-if="vm.order.orderParams.consoleHref != null"><div class="pull-right" style="margin-top:2.5px;margin-right:8px"><a id="consoleUrl" ng-href="{{vm.order.orderParams.consoleHref}}" target="_black"><button id="console" type="button" class="btn btn-default"><span class="value" bo-text="vm.order.orderParams.consoleName"></span></button></a></div></span></div><table ng-if="!vm.loadingState" class="table table-bordered"><tr><td style="width:50%"><span class="form-label"><span bo-bind="\'order.views.orderdetail.receiverInfo\'|translate"></span><!-- 收货信息 -->：</span> <span class="value" bo-text="vm.order.orderParams.showLogisticsParam"></span></td></tr><tr><td><span class="form-label"><span bo-bind="\'order.views.orderdetail.logisticsInfo\'|translate"></span><!-- 物流信息 -->：</span> <span class="value" bo-text="vm.order.orderParams.showLogisticsInfoList"></span></td></tr></table><div ng-if="vm.loadingState" aliyun-loading size="48" style="margin-top:50px"></div><div ng-if="vm.loadingState" style="height:50px"></div></div></span><!-- 详情的动态数据使用 dynamicInfoPanel来渲染，元数据是产品本身，模版和模版对应的scope用 model-type或者panelModel来指明 --><div ng-if="vm.order.extraInfo && vm.order.extraInfo.group && vm.order.extraInfo.group.length>0 " dynamic-info-panel raw-data="vm.order" model-type="orderDetailExtraInfoCommonModel"></div><div class="console-sub-title clearfix" style="margin-bottom:-10px"><div class="pull-left" style="margin-top:10px"><h5><span bo-bind="\'order.views.orderdetail.orderdetail\'|translate"></span><!-- 订单详情 --></h5></div></div><div ng-if="vm.order.orderLines" order-line-list-for-order-manage data="vm.order"></div><div ng-if="vm.order.orderId" style="margin-bottom:20px"><div class="console-box-border" style="margin-top:-1px"><div class="row-padding col-padding"><div class="text-right"><span bo-bind="\'order.views.orderdetail.originalAmount\'|translate"></span><!-- 原价 --> ：<span class="text-warning"><span bo-text="vm.order.originalAmount|moneyFilter"></span></span></div></div><div class="row-padding col-padding"><div class="text-right"><span bo-bind="\'order.views.orderdetail.tradeAmount\'|translate"></span><!-- 应付金额 --> ：<span class="text-warning"><span bo-text="vm.order.tradeAmount|moneyFilter"></span></span></div></div></div></div></div></div></div></div>'),window.$global.$templateCache.put("scripts/expenseCenter/orderManage/views/orderList.html",'<div class="row" bindonce><div class="col-sm-12"><div data-spm="139" ng-if="vm.isCaiNiao==\'false\'" class="console-title console-title-border clearfix"><div class="pull-left"><h5 bo-text="\'order.views.orderdlist.tt.orderlist\'|translate"></h5><!-- <h5>订单列表</h5> --><div ng-if="vm.childAliyunId" style="display: inline;margin-left: 20px;font-size: 15px">(下级单位：<span style="color: #f58300">{{vm.childAliyunId}}</span>)</div></div></div><div class="row margin-top-3" ng-if="vm.isCaiNiao==\'false\'"><div class="col-sm-12"><ul class="nav nav-tabs" data-spm="213"><li class="active"><a href="javascript:;"><span aliyun-console-spm="1" bo-bind="\'order.views.aliyunOrder\'|translate"></span><!-- 阿里云详单 --></a></li><li><a href="{{vm.netcnLink}}" target="_self"><span aliyun-console-spm="2" bo-bind="\'order.views.netOrder\'|translate"></span><!--万网详单--></a></li></ul></div></div><div class="margin-top-2"><div data-spm="140" class="col-sm-12" ng-class="{true: \'orderListShowColumn\', false: \'orderListHiddenColumn\'}[vm.queryModel.parentProductCode.code==\'ALIMAIL\']"><div class="row"><div class="col-sm-11" style="margin-right:0px;padding-right:0px"><div class="order-manage-search-bar margin-top" order-manage-search-bar query-model="vm.queryModel" config="searchBarConfig"></div></div><div class="pull-right"><span export-confirm config="vm.exportConfig"></span><div class="export" aliyun-console-spm="export" export-order-list-dialog raw-data="vm.exportConfig.rawData"></div></div></div><div data-spm="141" class="row" style="margin-top:10px"><div aliyun-simple-grid columns="vm.columns" store="vm.itemList" refresh-grid-view="vm.config.refreshGridView" loading-state="vm.loadingState" render-table="vm.updateTableData(data)" pagination-info="vm.pageInfo" selection-change="vm.selectionChange(data)" config="vm.config"></div></div></div></div></div></div>'),window.$global.$templateCache.put("scripts/expenseCenter/orderManage/partials/batchVoidDialog.html",'<!DOCTYPE html><html><head lang="en"><meta charset="UTF-8"><title></title></head><body><div batchvoidfield><button type="button" style="width:40px;height:40px" class="close" data-dismiss="modal" data-ng-click="close(false)" aria-hidden="true">&times;</button><div class="modal-header" style="margin-left:30px; margin-right:30px"><h4>{{ \'order.views.caution\'|translate }}</h4></div><div class="modal-body clearfix"><div class="col-sm-1 text-center"><span class="text-size-32 icon-warning-2 text-warning" ng-class="iconClass"></span></div><div class="col-sm-11 breakall"><h5>{{ \'order.views.center\'|translate }}</h5><br><br><br></div></div><div class="modal-footer" style="margin-left:30px; margin-right:30px"><div style="margin:0 auto;width:200px"><button class="btn btn-primary" data-ng-click="eventHandler(true)">{{ \'order.cm.confirm\'|translate }}</button> <button class="btn btn-default" data-ng-click="close(false)">{{ \'order.cm.cancel\'|translate }}</button></div></div></div></body></html>'),window.$global.$templateCache.put("scripts/expenseCenter/orderManage/partials/exportOrderListDialog.html",'<div bindonce><div class="modal-header"><button type="button" class="close" data-dismiss="modal" data-ng-click="close(false)" aria-hidden="true">&times;</button><h5 class="modal-title">{{ \'order.partial.exportdialog.title\'|translate }}</h5></div><div class="modal-body"><div html-form form-model="exportOrderListFormModel" raw-data="rawData"></div></div><div class="modal-footer"><button class="btn btn-primary" ng-disabled="rawData.disableExport" data-ng-click="eventHandler(true)">{{ \'order.cm.confirm\'|translate }}</button> <button class="btn btn-default" data-ng-click="close(false)">{{ \'order.cm.cancel\'|translate }}</button></div></div>'),window.$global.$templateCache.put("scripts/expenseCenter/orderManage/partials/orderDetailExtraInfoCommonView.html",'<div ng-if="vm.groups && vm.groups.length>0" class="inner-group-info"><div ng-repeat="group in vm.groups"><div class="console-sub-title clearfix"><div class="pull-left"><h5><span bo-text="group.groupName|orderDetailExtraInfoFilter:\'groupName\'"></span></h5></div></div><div class="row"><div class="col-sm-12"><table style="margin-top:0px" class="table table-hover"><tbody><tr ng-repeat="item in group.items"><td><span bo-bind="item.key|orderDetailExtraInfoFilter:\'key\'"></span>: <span bo-bind="item.value"></span></td></tr></tbody></table></div></div></div></div>'),window.$global.$templateCache.put("scripts/expenseCenter/orderManage/partials/orderLineExtraInfoPartials/changeInfo.html",'<div ng-if="vm.changedConfigs && vm.changedConfigs.length>0" class="inner-group-info"><div class="console-sub-title clearfix"><div class="pull-left"><h5>{{ \'order.partial.changeinfo.title\'|translate }}</h5></div><div><span class="pull-right margin-right margin-top no-text-select" style="font-size:20px; cursor:pointer" ng-class="{\'icon-down\':$hide,\'icon-up\':!$hide}" ng-click="$hide = !$hide;"></span></div></div><div ng-show="!$hide" class="row"><div class="col-sm-12"><table style="margin-top:0px" class="table table-hover"><thead><tr><th>{{ \'order.partial.changeinfo.before\'|translate }}</th><th>{{ \'order.partial.changeinfo.after\'|translate }}</th></tr></thead><tbody><tr ng-repeat="item in vm.changedConfigs"><td><div ng-repeat="fromItem in item.fromConfig"><span ng-if="fromItem.componentName"><span bo-bind="fromItem.componentName"></span>: <span ng-repeat="property in fromItem.properties" bo-bind="property.name"></span></span></div><span ng-if="!item.fromConfig || item.fromConfig.length == 0 || item.fromConfig.length ==1 && item.fromConfig[0].componentName ==\'\'">-</span></td><td><div ng-repeat="toItem in item.toConfig"><span ng-if="toItem.componentName"><span bo-bind="toItem.componentName"></span>: <span ng-repeat="property in toItem.properties" bo-bind="property.name"></span></span></div><span ng-if="!item.toConfig || item.toConfig.length == 0 || item.toConfig.length ==1 && item.toConfig[0].componentName ==\'\'">-</span></td></tr></tbody></table></div></div></div>'),window.$global.$templateCache.put("scripts/expenseCenter/orderManage/partials/orderLineExtraInfoPartials/otherExtraInfo.html",'<div ng-if="vm.infos && vm.infos.length>0" class="inner-group-info"><div class="console-sub-title clearfix"><div class="pull-left"><h5>{{ \'order.partial.otherinfo.title\'|translate }}</h5></div><div><span class="pull-right margin-right margin-top no-text-select" style="font-size:20px; cursor:pointer" ng-class="{\'icon-down\':$hide,\'icon-up\':!$hide}" ng-click="$hide = !$hide;"></span></div></div><div ng-show="!$hide" class="row"><div class="col-sm-12"><table style="margin-top:0px" class="table table-hover"><tbody><tr ng-repeat="item in vm.infos"><td><span bo-bind="item.key|orderStatusFilter:\'orderline\'"></span>：<span bo-bind="item.value|orderDetailExtraInfoValueFilter:item.key"></span></td></tr></tbody></table></div></div></div>'),window.$global.$templateCache.put("scripts/expenseCenter/orderManage/partials/orderLineExtraInfoPartials/renewTimeInfo.html",'<div ng-if="vm.infos && vm.infos.length>0" class="inner-group-info"><div class="console-sub-title clearfix"><div class="pull-left"><h5>{{ \'order.partial.renewinfo.title\'|translate }}</h5></div><div><span class="pull-right margin-right margin-top no-text-select" style="font-size:20px; cursor:pointer" ng-class="{\'icon-down\':$hide,\'icon-up\':!$hide}" ng-click="$hide = !$hide;"></span></div></div><div ng-show="!$hide" class="row"><div class="col-sm-12"><table style="margin-top:0px" class="table table-hover"><tbody><tr><td><span>{{ \'order.partial.renewinfo.expire.before\'|translate }}</span>：<span bo-bind="vm.infos[0].renew_before_endtime|aliyunDateFormatter"></span></td><td><span>{{ \'order.partial.renewinfo.expire.after\'|translate }}</span>：<span bo-bind="vm.infos[0].renew_after_endtime|aliyunDateFormatter"></span></td></tr></tbody></table></div></div></div>'),window.$global.$templateCache.put("scripts/expenseCenter/orderManage/partials/orderLineList.html",'<div bindonce ng-repeat="item in vm.orderLines"><!-- <div class="light-title console-box-border ">\n        订单：<span bo-bind="item.$orderLineId"></span>\n    </div> --><table class="table table-border subOrder-table"><thead><!-- 以下为官网订单列表需要展示内容 --><tr ng-if="vm.order.marketType!==\'CLOUD_PORTAL\'"><th style="width:17%"><span bo-bind="\'order.partial.orderlinelist.tb.product\'|translate"></span><!-- 产品 --></th><th style="width:7%"><span bo-bind="\'order.partial.orderlinelist.tb.number\'|translate"><!-- 数量 --></span></th><th style="width:30%"><span bo-bind="\'order.partial.orderlinelist.tb.config\'|translate"><!-- 具体配置 --></span></th><th style="width:10%"><!-- 付款方式 --><span bo-bind="\'order.partial.orderlinelist.tb.payType\'|translate"></span></th><th style="width:25%"><!-- 起止时间 --><span bo-bind="\'order.partial.orderlinelist.tb.time\'|translate"></span></th><th style="width:11%;text-align:right"><!-- 金额 --><span bo-bind="\'order.partial.orderlinelist.tb.sumOfMoney\'|translate"></span></th></tr><!-- 以下为云市场订单列表需要展示内容 --><tr ng-if="vm.order.marketType===\'CLOUD_PORTAL\'"><th style="width:20%"><!-- 商品名称 --><span bo-bind="\'order.partial.orderlinelist.tb.productName\'|translate"></span></th><th style="width:15%"><!-- 商品类型 --><span bo-bind="\'order.partial.orderlinelist.tb.type\'|translate"></span></th><th style="width:40%"><!-- 商品描述 --><span bo-bind="\'order.partial.orderlinelist.tb.description\'|translate"></span></th><th style="width:10%"><span bo-bind="\'order.partial.orderlinelist.tb.payType\'|translate"></span><!-- 付款方式 --></th><th style="width:15%;text-align:right"><span bo-bind="\'order.partial.orderlinelist.tb.sumOfMoney\'|translate"></span><!-- 金额 --></th></tr></thead><tbody><!-- 兼容菜鸟云123 --><tr ng-if="vm.order.marketType!==\'CLOUD_PORTAL\'&&item.orderCategory!==\'REFUND\'"><td style="width:17%"><span class="nowrap" bo-text="item.specName"></span><div ng-if="item.instanceIds && item.instanceIds.length>0 && vm.order.marketType !==\'CLOUD_PORTAL\'"><!-- 这里都统一叫实例名称感觉有问题，但是PD确定这样搞，如果后续需要按照不同的产品做不同的展示，则在这里修改 --><div><span bo-bind="\'order.partial.orderlinelist.tb.instanceName\'|translate"></span><!-- 实例名称： --></div><div ng-repeat="id in item.instanceIds"><span bo-bind="id"></span></div></div></td><td style="width:7%"><div bo-text="item.quantity"></div></td><td style="width:30%"><div ng-repeat="instance in item.instanceComponents"><div ng-if="instance.componentName"><span class="instance-property-label" bo-bind="instance.componentName"></span>： <span class="nowrap instance-property-value" ng-repeat="property in instance.properties" ng-if="property.name"><span bo-bind="property.name"></span></span></div></div></td><td style="width:10%"><div ng-if="item.chargeType !=\'POSTPAY\'"><span bo-bind="\'order.partial.orderlinelist.tb.by\'|translate"></span><!-- 按 --><span bo-bind="item.pricingCycle|orderStatusFilter:\'pricingCycle\'"></span><span ng-if="item.duration != \'\'">（<span bo-bind="item.duration"></span><span bo-bind="item.pricingCycle|orderStatusFilter:\'pricingCycle\'"></span>）</span></div><div ng-if="item.chargeType ===\'POSTPAY\'"><span bo-bind="\'order.partial.orderlinelist.tb.byAmount\'|translate"><!-- 按量 --></span></div></td><td style="width:25%"><span ng-if="item.gmtFrom && item.chargeType !=\'POSTPAY\'" bo-bind="item.gmtFrom|aliyunDateFormatter"></span> - <span ng-if="item.gmtTo && item.chargeType !=\'POSTPAY\'" bo-bind="item.gmtTo|aliyunDateFormatter"></span></td><td style="width:11%;text-align:right"><span>￥</span><span bo-bind="item.tradeAmount"></span></td></tr><!--退款子订单行--><tr ng-if="vm.order.marketType!==\'CLOUD_PORTAL\'&&item.orderCategory===\'REFUND\'"><td style="width:17%"><span class="nowrap" bo-text="item.commodityName"></span><div ng-if="item.productPurchases[0].instanceId && item.productPurchases[0].instanceId.length>0 &&  item.productPurchases[0].marketType !==\'CLOUD_PORTAL\'"><!-- 这里都统一叫实例名称感觉有问题，但是PD确定这样搞，如果后续需要按照不同的产品做不同的展示，则在这里修改 --><div><span bo-bind="\'order.partial.orderlinelist.tb.instanceName\'|translate"></span><!-- 实例名称： --></div><span bo-bind="item.productPurchases[0].instanceId"></span></div></td><td style="width:7%"><div>1</div><!-- 退款订单都是一个一个退，这里写死1： --></td><td style="width:30%"><div ng-repeat="instance in item.productPurchases[0].instanceComponents"><div ng-if="instance.componentName"><span class="instance-property-label" bo-bind="instance.componentName"></span>： <span class="nowrap instance-property-value" ng-repeat="property in instance.properties" ng-if="property.name"><span bo-bind="property.name"></span></span></div></div></td><td style="width:10%"><div ng-if="item.productPurchases[0].chargeType !=\'POSTPAY\'"><span bo-bind="\'order.partial.orderlinelist.tb.by\'|translate"></span><!-- 按 --><span bo-bind="item.pricingCycle|orderStatusFilter:\'pricingCycle\'"></span><span ng-if="item.duration != \'\'">（<span bo-bind="item.duration"></span><span bo-bind="item.pricingCycle|orderStatusFilter:\'pricingCycle\'"></span>）</span></div><div ng-if="item.productPurchases[0].chargeType ===\'POSTPAY\'"><span bo-bind="\'order.partial.orderlinelist.tb.byAmount\'|translate"><!-- 按量 --></span></div></td><td style="width:25%"><span ng-if="item.productPurchases[0].startDate && item.chargeType !=\'POSTPAY\'" bo-bind="item.productPurchases[0].endDate|aliyunDateFormatter"></span> - <span ng-if="item.productPurchases[0].endDate && item.chargeType !=\'POSTPAY\'" bo-bind="item.productPurchases[0].origEndDate|aliyunDateFormatter"></span></td><td style="width:11%;text-align:right"><span>￥</span><span bo-bind="item.tradeAmount"></span></td></tr><tr ng-if="vm.order.marketType===\'CLOUD_PORTAL\'"><td style="width:20%"><span class="nowrap" bo-html="item.commodityName"></span></td><td style="width:15%"><div bo-text="item.orderParams.productType|orderStatusFilter:\'yunmarketType\'"></div></td><td style="width:40%"><span bo-html="item.orderParams.productDescription"></span></td><td style="width:10%"><div ng-if="item.chargeType !=\'POSTPAY\'"><span bo-bind="\'order.partial.orderlinelist.tb.by\'|translate"></span><!-- 按 --><span bo-bind="item.pricingCycle|orderStatusFilter:\'pricingCycle\'"></span><span ng-if="item.duration != \'\'">（<span bo-bind="item.duration"></span><span bo-bind="item.pricingCycle|orderStatusFilter:\'pricingCycle\'"></span>）</span></div><div ng-if="item.chargeType ===\'POSTPAY\'"><span bo-bind="\'order.partial.orderlinelist.tb.byAmount\'|translate"><!-- 按量 --></span></div></td><td width="15%;text-align:right;"><span bo-bind="item.tradeAmount|moneyFilter"></span><span bo-bind="item.tradeAmountUnit"></span></td></tr></tbody></table><div ng-if="item.extraInfo.group && item.extraInfo.group.length>0" class="console-box-border row-padding col-padding" style="margin-top:-1px"><div class="row"><div class="col-sm-12" ng-repeat="subExtraInfo in item.extraInfo.group"><div dynamic-info-panel raw-data="subExtraInfo" model-type="{{subExtraInfo.$dynamicInfoPanelModelName}}"></div></div></div></div></div>'),window.$global.$templateCache.put("scripts/expenseCenter/orderManage/partials/payStatusForOrderManage.html",'<span><span class="value" bo-html="vm.order.orderStatus|orderStatusFilter:\'order\'"></span><!-- 已支付=现金支付+代金券支付 --> <span ng-if="vm.order.orderStatus ===\'PAID\'"><span ng-if="vm.order.chargeType==\'POSTPAY\'"><span class="text-warning"><span ng-bind="vm.order.tradeAmount|moneyFilter"></span></span></span> <span ng-if="vm.order.chargeType==\'PREPAY\'"><span class="text-warning"><span ng-bind="vm.order.tradeAmount|\n        moneyFilter"></span></span> <span ng-if="vm.order.youHuiQuanAmount">(优惠券抵扣<span class="text-warning" ng-bind="vm.order.youHuiQuanAmount|moneyFilter"></span>后金额)</span> =<!--<span ng-if="vm.order.orderLines[0].orderParams[\'mybankPay\']===\'mybankPayValue\'">--><!--（<span><span bo-bind="\'order.partial.paystatusView.lb.mybank\'|translate"></span>&lt;!&ndash; 信任付支付： &ndash;&gt;</span><span--><!--ng-bind="vm.order.payAmount|moneyFilter"></span> ）--><!--</span>--><!--<span ng-if="vm.order.orderLines[0].orderParams[\'mybankPay\']!=\'mybankPayValue\'">--><!--（<span><span bo-bind="\'order.partial.paystatusView.lb.cash\'|translate"></span>&lt;!&ndash; 现金支付： &ndash;&gt;</span><span--><!--ng-bind="vm.order.payAmount|moneyFilter"></span> ）--><!--</span>--> （<span><span bo-bind="\'order.partial.paystatusView.lb.cash\'|translate"></span><!-- 现金支付： --></span><span ng-bind="vm.order.payAmount|moneyFilter"></span> ） + （<span>支付宝/网银支付：</span><span ng-bind="vm.order.alipayOrEbankAmount|moneyFilter"></span> ） +（<span><span bo-bind="\'order.partial.paystatusView.lb.mybank\'|translate"></span></span> <span ng-bind="vm.order.myBankAmount|moneyFilter"></span> ） ＋ （<span><!-- 代金券支付： --><span bo-bind="\'order.partial.paystatusView.lb.coupon\'|translate"></span></span><span ng-bind="vm.order.couponAmount|moneyFilter"></span> ） + （<span><!-- 卡包支付： --><span bo-bind="\'order.partial.paystatusView.lb.card\'|translate"></span></span><span ng-bind="vm.order.cardAmount|moneyFilter"></span> ） <span ng-if="vm.order.oweAmount">＋ （<span><!-- 未结算： --><span bo-bind="\'order.partial.paystatusView.lb.notpay\'|translate"></span></span><span ng-bind="vm.order.oweAmount|moneyFilter"></span> ）</span> <span ng-if="vm.order.creditAmount">+ （<span><!-- 账单调整： --><span bo-bind="\'order.partial.paystatusView.lb.refundbill\'|translate"></span></span> <span popover2-placement="top" popover-append-to-body="true" class="icon-help-2 text-muted ng-scope" aliyun-popover2="由于退款订单，系统对您的可用信用额度进行恢复。"></span> <span ng-bind="vm.order.creditAmount|moneyFilter"></span> ）</span></span></span><!-- 未结金额=应付金额-现金支付-代金券支付（预付费后结算订单未结清时）确定是否有这个状态以及计算方式可否实现；--> <span ng-if="vm.order.orderStatus ===\'CANCELED\'"><span class="text-warning"><span bo-bind="vm.order.tradeAmount|moneyFilter"></span></span> <span ng-if="vm.order.youHuiQuanAmount">(优惠券抵扣<span class="text-warning" ng-bind="vm.order.youHuiQuanAmount|moneyFilter"></span>后金额)</span></span><!-- 支付中--> <span ng-if="vm.order.orderStatus ===\'UNPAID\'"><span class="text-warning"><span bo-bind="vm.order.tradeAmount|moneyFilter"></span></span> <span ng-if="vm.order.youHuiQuanAmount">(优惠券抵扣<span class="text-warning" ng-bind="vm.order.youHuiQuanAmount|moneyFilter"></span>后金额)</span></span><!-- 已退款--> <span ng-if="vm.order.orderStatus ===\'REFUND\'"><span class="text-warning"><span bo-bind="vm.order.tradeAmount|moneyFilter"></span></span></span></span>'),window.$global.$templateCache.put("scripts/expenseCenter/orderManage/partials/searchBar.html",'<form class="{{vm.formStyle||\'form-inline\'}} consumption-searchbar ng-pristine ng-valid" novalidate role="form"><div class="form-group"><label class="control-label" for=""><span bo-bind="\'order.model.detail.product\'|translate"></span><!-- 产品 -->：</label><select aliyun-console-spm="1" style="width:10em" class="form-control" ng-model="queryModel.parentProductCode" ng-options="item.name for item  in vm.parentProductCodes track by item.code"><option value="" bo-text="\'order.model.export.product.all\'|translate"><!-- 所有产品 --></option></select><select aliyun-console-spm="2" style="width:10em;margin-left:10px" class="form-control" ng-model="queryModel.productCode" ng-options="item.name for item in vm.productCodes track by item.code"><option value="" bo-text="\'order.model.export.productcode.all\'|translate"><!-- 所有产品细类 --></option></select></div><div class="form-group"><label class="control-label" for=""><span bo-bind="\'order.model.export.ordertype\'|translate"></span><!-- 订单类型 -->：</label><select aliyun-console-spm="3" ng-model="queryModel.orderType" class="form-control" ng-options="item.name for item in vm.orderTypes track by item.value"><option value="" bo-text="\'order.model.export.ordertype.all\'|translate"><!-- 所有类型 --></option></select></div><div class="form-group"><label class="control-label" for=""><span bo-bind="\'order.model.export.paystatus\'|translate"></span><!-- 支付状态 -->：</label><select aliyun-console-spm="4" ng-model="queryModel.payStatus" class="form-control" ng-options="item.name for item in vm.payStatus track by item.value"><option value="" bo-text="\'order.model.export.paystatus.all\'|translate"><!-- 所有状态 --></option></select></div><div class="form-group"><label for="" class="control-label"><span bo-bind="\'order.model.export.time\'|translate"></span><!-- 时间 -->：</label><div aliyun-console-spm="5" date-step-unit readonly-date-selector="false" min-date="queryModel.minDate" max-date="queryModel.maxDate" start-date="queryModel.startTime" end-date="queryModel.endTime" start-date-init="queryModel.startDateInit" init-time="true" display-mode="\\\'h-m-s\\\'" class="inline-block margin-right-1"></div><div class="form-group email-domain"><label for="" class="control-label"><span bo-bind="\'order.model.export.domainName\'|translate"></span><!-- 域名 -->：</label><input style="width: 90px" type="text" placeholder="" class="form-control" size="10" ng-model="queryModel.domainName" aliyun-console-spm="2"></div><button aliyun-console-spm="6" type="submit" ng-click="vm.query()" class="btn btn-default"><span bo-bind="\'order.partial.searchbar.btn.search\'|translate"></span><!-- 查询 --></button></div></form>'),window.$global.$templateCache.put("scripts/expenseCenter/orderManage/partials/summaryForFlow.html",'<div bindonce class="list-summary-panel console-box-border row-padding col-padding"><div ng-if="vm.showInfo ===\'debtAll\'" class="summary-row main-row"><span class="form-label"><span bo-bind="\'order.partial.summaryforflow.lb.sumOfNotPay\'|translate"></span><!-- 全部欠费金额总计： --></span> <span class="total-money text-warning"><span>￥</span> <span ng-bind="(vm.summary.totalFee).toFixed(2)">0</span></span></div><div ng-if="vm.showInfo ===\'debt\'" class="summary-row main-row"><span class="start-date" ng-bind="vm.startTime|date:\'yyyy-MM-dd\'"></span> <span class="date-seprator"><span bo-bind="\'order.partial.summaryforflow.lb.to\'|translate"></span><!-- 至 --></span> <span class="end-date" ng-bind="vm.endTime|date:\'yyyy-MM-dd\'"></span> <span class="form-label"><span bo-bind="\'order.partial.summaryforflow.lb.oweAmount\'|translate"></span><!-- 欠费总计： --></span> <span class="total-money text-warning"><span>￥</span> <span ng-bind="(vm.summary.totalFee).toFixed(2)">0</span></span></div><div ng-if="vm.showInfo ===\'normal\'" class="summary-row main-row"><span class="start-date" ng-bind="vm.startTime|date:\'yyyy-MM-dd\'"></span> <span class="date-seprator"><span bo-bind="\'order.partial.summaryforflow.lb.to\'|translate"></span><!-- 至 --></span> <span class="end-date" ng-bind="vm.endTime|date:\'yyyy-MM-dd\'"></span> <span class="form-label"><span bo-bind="\'order.partial.summaryforflow.lb.payAmount\'|translate"></span><!-- 消费总计： --></span> <span class="total-money text-warning"><span>￥</span> <span ng-bind="(vm.summary.totalFee).toFixed(2)">0</span></span></div><div class="summary-row">（ <span class="form-label"><span bo-bind="\'order.partial.summaryforflow.lb.prepayAmount\'|translate"></span><!-- 预付费金额总计： --></span>￥ <span class="money" ng-bind="(vm.summary.prepay.fee).toFixed(2)">0</span> <span class="form-label"><span bo-bind="\'order.partial.summaryforflow.lb.postpayAmount\'|translate"></span><!-- 后付费金额总计： --></span>￥ <span class="money" ng-bind="(vm.summary.afterpay.fee).toFixed(2)">0</span> ）</div></div>')}),define("expenseCenter/orderManage/helpers/productHelper",["base/utils/expenseCenterVariablesService"],function(e){var t=e.getKeyFromConstants("ORDERMANAGE").PRODUCT,n=function(e,t){return e.sortIndex<t.sortIndex?-1:1};return{getParentProducts:function(){var e=[];if(angular.isObject(t))for(var r in t)if(t.hasOwnProperty(r)){var i=t[r];i.isParent&&(i.children=i.children.sort(n),e.push(i))}return e.sort(n)},getAllProducts:function(){return t}}}),define("expenseCenter/orderManage/helpers/_base",["./productHelper"],function(){}),define("expenseCenter/orderManage/controllers/controllers",["angular","base/controllers/controllers","common/modelSystem/lazyModule"],function(e,t,n){var r=t;return n.makeLazy(r),r}),define("expenseCenter/orderManage/cons/orderCons",["i18nHelper"],function(e){return{VIEW_PATH:"scripts/expenseCenter/orderManage/views/",PARTIALS_PATH:"scripts/expenseCenter/orderManage/partials/",EVENTS:{ORDER_REFRESH:"orderManage.order:refresh",QUERY_FLOW_GRID:"orderManage.orderList:query"},ORDER_EXTRA_INFO:{groupName:{"yunmarket-supplier":e.i18n("order.cons.supplier.info")},key:{supplierName:e.i18n("order.cons.supplier.name"),supplierDescription:e.i18n("order.cons.supplier.contact")}},FROM_STATES:{order:{text:e.i18n("order.cons.list"),state:"orderManage.list"},prepay:{text:e.i18n("order.cons.list.prepay"),state:"consumption.list.flow",params:{payType:"prepay"}}},STATUS:{yunmarketType:{APP:e.i18n("order.cons.status.yunmarket.app"),SERVICE:e.i18n("order.cons.status.yunmarket.service")},orderline:{expectedRestartTime:e.i18n("order.cons.status.orderline.expected_restart_time"),gmt_release:e.i18n("order.cons.status.orderline.gmt_release")},chargflow:{1:e.i18n("order.cons.status.chargflow.cash"),4:e.i18n("order.cons.status.chargflow.coupon"),5:e.i18n("order.cons.status.chargflow.alipay"),8:e.i18n("order.cons.status.chargflow.mybank")},pricingCycle:{Year:e.i18n("order.cons.status.unit.year"),Month:e.i18n("order.cons.status.unit.month"),Day:e.i18n("order.cons.status.unit.day"),Hour:e.i18n("order.cons.status.unit.hour"),Minute:e.i18n("order.cons.status.unit.minute"),ONCE:e.i18n("order.cons.status.unit.once")},payMode:{FOR_USE_BANDWIDTH:e.i18n("order.cons.status.paymode.bindwidth"),FOR_USE_OTHER:e.i18n("order.cons.status.paymode.other"),FOR_USE_MEASURE:{FOR_TIME:e.i18n("order.cons.status.paymode.times"),FOR_HOUR:e.i18n("order.cons.status.paymode.hour"),FOR_DAY:e.i18n("order.cons.status.paymode.day"),FOR_MONTH:e.i18n("order.cons.status.paymode.month")}},order:{UNPAID:'<span class="nowrap text-danger">'+e.i18n("order.cons.status.order.unpaid")+"</span>",PAID:'<span class="nowrap text-success">'+e.i18n("order.cons.status.order.paid")+"</span>",CANCELED:'<span class="nowrap ">'+e.i18n("order.cons.status.order.cancel")+"</span>",REFUND:'<span class="nowrap ">'+e.i18n("order.cons.status.order.refund")+"</span>"},orderType:{BUY:e.i18n("order.cons.status.ordertype.buy"),RENEW:e.i18n("order.cons.status.ordertype.renew"),UPGRADE:e.i18n("order.cons.status.ordertype.upgrade"),DOWNGRADE:e.i18n("order.cons.status.ordertype.downgrade"),TRIAL:e.i18n("order.cons.status.ordertype.trial"),CHANGEOS:e.i18n("order.cons.status.ordertype.changeos"),EXTRA:e.i18n("order.cons.status.ordertype.extra"),REMEDY:e.i18n("order.cons.status.ordertype.remedy"),PURCHASE:e.i18n("order.cons.status.ordertype.purchase"),INCREASE_UPGRADE:e.i18n("order.cons.status.ordertype.bindwidth_upgrade"),REFUND:e.i18n("order.cons.status.ordertype.refund"),RELEASE:e.i18n("order.cons.status.ordertype.release"),CONVERT:e.i18n("order.cons.status.ordertype.convert"),BANDWIDTH_REMEDY:e.i18n("order.cons.status.ordertype.bindwidth_remedy"),RESIZE:e.i18n("order.cons.status.ordertype.resize")}},PAY_STATUS:{paying:"PAY_DOING",payed:"PAY_FINISH",debt:"PAY_UNCLEAR"},PAY_STATUS_ITEMS:[{name:e.i18n("order.cons.status.order.unpaid"),value:"UNPAID"},{name:e.i18n("order.cons.status.order.paid"),value:"PAID"},{name:e.i18n("order.cons.status.order.cancel"),value:"CANCELED"}],ORDER_TYPE:{ALIYUN:"aliyun",YUNMARKET:"yunmarket"},EXPORT_UNIT:[{name:e.i18n("order.cons.status.unit.hour"),value:"hour"},{name:e.i18n("order.cons.status.unit.day"),value:"day"}],PAY_URL:"/order/pay.json?orderId=",AUTO_RELEASE_DATE:7,EXPORT_URL:{exportOrderUrl:"/order/export.json"},ORDER_LINE_EXTRAINFO_CONS:{CHANGE_INFO:"dynamicModelForChangeInfoOfOrderManage",RENEW_TIME_INFO:"dynamicModelForRenewTimeOfOrderManage",EXTRA_ORDER_INFO:"dynamicModelForExtraOrderInfoOfOrderManage"},ORDER_STATUS_CONVERT:{UNPAID:"PAY_UNCLEAR",PAID:"PAY_FINISH",CANCELED:"PAY_UNCLEAR"}}}),define("expenseCenter/orderManage/controllers/orderController",["angular","./controllers","i18nHelper","../helpers/productHelper","../cons/orderCons"],function(e,t,n,r,i){function s(t,s,o,u){var a={},f={pageInfo:{pageSize:undefined,currentPage:undefined}};o.baseInitConfig={parentProductCodes:r.getParentProducts(),payStatus:i.PAY_STATUS_ITEMS,orderTypes:[{name:n.i18n("order.cons.status.ordertype.buy"),value:"BUY"},{name:n.i18n("order.cons.status.ordertype.renew"),value:"RENEW"},{name:n.i18n("order.cons.status.ordertype.upgrade"),value:"UPGRADE"},{name:n.i18n("order.cons.status.ordertype.downgrade"),value:"DOWNGRADE"},{name:n.i18n("order.cons.status.ordertype.remedy"),value:"REMEDY"},{name:n.i18n("order.cons.status.ordertype.refund"),value:"REFUND"}]},o.getCurrentPageInfo=function(){return f.pageInfo},o.setCurrentPageInfo=function(t){t?f.pageInfo=e.extend(f.pageInfo,t):f={pageInfo:{pageSize:undefined,currentPage:undefined}}},o.getQueryModel=function(){return a},o.setCurrentQueryModel=function(e){a=e}}t.controller("orderController",s,"$$baseController"),s.$inject=["$injector","orderManageRequest","$scope","$timeout"]}),define("expenseCenter/orderManage/controllers/orderDetailController",["angular","./controllers","i18nHelper","../cons/orderCons"],function(e,t,n,r){function i(t,i,s,o,u,a){function v(e){var t=null;if(e){var r=null,i=0;t=[];for(var s in e)if(e.hasOwnProperty(s)){var o=e[s];if(o&&(o.orderCategory==="PRODUCT"||o.orderCategory==="REFUND"&&o.orderType==="REFUND")){o.$id=s;if(o.orderType==="UPGRADE"||o.orderType=="DOWNGRADE")r=o;o.chargeType=="POSTPAY"?o.tradeAmountUnit=n.i18n("order.orderdetail.trade_unit"):o.tradeAmountUnit="",o.orderParams&&o.orderParams.paymentType&&o.orderParams.paymentType=="ONCE"&&(o.duration="",o.pricingCycle="ONCE"),t.push(o)}if(o.orderType=="UPGRADE"||o.orderType=="DOWNGRADE")i+=o.tradeAmount*1}r&&(r.tradeAmount=i.toFixed(2))}return t||e}function m(e){e.orderType==="REFUND"&&(e.orderStatus="REFUND")}this.$parent.$constructor.call(this,o);var f=this;this.loadingState=!0,this.stateName="order";var l=i.from||this.stateName,c=r.FROM_STATES[l]||r.FROM_STATES[this.stateName];this.fromText=c.text,this.goBack=function(){s.go(c.state,c.params||{})},this.goUrl=function(){s.go(c.state,c.params||{})},this.gridModel=this.$getModel("orderLineDetailList","GridModel");var h=i.code,p=i.marketType,d=p==r.ORDER_TYPE.ALIYUN?"getOrderDetailInfo":"getMarketOrderDetailInfo";this.payUrl=r.PAY_URL+h,this.loadData=function(){var i={params:{orderId:h}};f.loadingState=!0,a[d](i).then(function(i){var s=f.$handleResponse(i,t);if(s&&!e.isFunction(s.then)){s.orderLines=v(s.orderLines),f.loadingState=!1;try{s.fuwuOrder&&s.fuwuOrder.expireTime?s.payDeadLine=new Date(s.fuwuOrder.expireTime):s.payDeadLine=new Date(s.gmtCreate+r.AUTO_RELEASE_DATE*24*60*60*1e3)}catch(o){s.payDeadLine=new Date(s.gmtCreate+r.AUTO_RELEASE_DATE*24*60*60*1e3)}m(s),f.order=s;var u=t.get("$filter")("aliyunDateFormatter"),a=u(f.order.payDeadLine);f.endlineNotice=n.i18n("order.views.orderdetail.paynotice",a)}})},this.expandChargeFlowText=n.i18n("order.orderdetail.expand"),this.showDetail=function(){f.expandChargeFlowText=f.showChargeFlow?n.i18n("order.orderdetail.expand"):n.i18n("order.orderdetail.collapse"),f.showChargeFlow=!f.showChargeFlow},this.$on(r.EVENTS.ORDER_REFRESH,function(){f.loadData()}),this.loadData()}t.controller("orderDetailController",i,"$$baseController"),i.$inject=["$injector","$stateParams","$state","$scope","$timeout","orderManageRequest"]}),define("expenseCenter/orderManage/helpers/queryModelHelper",["angular"],function(e){return{convertConsumptionListQueryModel:function(t){var n=e.copy(t);return{parentCommodityCode:n.parentProductCode&&n.parentProductCode.code||"",commodityCode:n.productCode&&n.productCode.code||"",orderType:n.orderType&&n.orderType.value||"",orderStatus:n.payStatus&&n.payStatus.value||"",startDate:n.startTime||"",endDate:n.endTime||"",extend3:n.domainName||""}}}}),define("expenseCenter/orderManage/controllers/orderListController",["angular","./controllers","i18nHelper","base/helpers/tableHelper","base/helpers/monthHelper","../helpers/queryModelHelper","../cons/orderCons","base/utils/expenseCenterVariablesService","../helpers/productHelper"],function(e,t,n,r,i,s,o,u,a){function f(t,i,a,f,l,c,h){function d(e,t){var n=null;if(e&&t)for(var r=0,i=null;i=t[r];r++)if(i.value===e.toUpperCase()){n=i;break}return n}this.$parent.$constructor.call(this,a);var p=this;this.payStatus=c.payStatus,p.childAliyunId=window.ALIYUN_EXPENSECENTER_CONSOLE_CONFIG.childAliyunID;var v=u.getKeyFromConstants("netcnLink").orderManageLink;this.netcnLink=v,this.isCaiNiao=window.ALIYUN_EXPENSECENTER_CONSOLE_CONFIG.IS_CAINIAO;var m=u.getKeyFromConstants("CONSUMPTION"),g=u.getKeyFromConstants("TODAY")||new Date;a.searchBarConfig={},a.searchBarConfig.parentProductCodes=a.baseInitConfig.parentProductCodes,a.searchBarConfig.payStatus=o.PAY_STATUS_ITEMS,a.searchBarConfig.orderTypes=a.baseInitConfig.orderTypes,a.searchBarConfig.productCodes=[],a.initParam=a.getQueryModel(),a.initParam.startDateInit=a.initParam.startTime||null,a.initParam.endTime=a.initParam.endTime||null,a.initParam.minDate=null,a.initParam.maxDate=g||new Date,a.initParam.startTime=null,a.initParam.domainName=null,a.initParam.payStatus=a.initParam.payStatus||d(this.payStatus,o.PAY_STATUS_ITEMS),this.queryModel=a.initParam,a.setCurrentQueryModel(this.queryModel);var y=null,b=null,w=function(){},E=null;e.extend(p,r),y=p.$getModel("orderListGridModel","GridModel"),y.config.goToDetailView=function(e){var t=e.marketType==="CLOUD_PORTAL"?o.ORDER_TYPE.YUNMARKET:o.ORDER_TYPE.ALIYUN;l.go("orderManage.detail",{marketType:t,code:e.orderId})},p.selectionChange=function(t){y.config.selectNum=0,y.config.selectedItemsMap={},y.config.selectedOrderIdMap={},y.config.selectItemIds="",e.extend(y.config.selectedItemsMap,t),e.forEach(t,function(e){e.orderStatusz==="UNPAID"&&(y.config.selectNum=y.config.selectNum+1)});var n=y.config.selectNum;e.forEach(t,function(e){e.orderStatus==="UNPAID"?(n-=1,y.config.selectItemIds=y.config.selectItemIds+e.orderId,n!=0&&(y.config.selectItemIds=y.config.selectItemIds+",")):e.selected=!1})},y.config.batchpay=function(){var e=o.PAY_URL+y.config.selectItemIds;window.open(e,"_blank")},this.cancelOrder=function(){e.forEach(y.config.selectedItemsMap,function(n){var r={params:{orderId:n.orderId.toString()}};i.cancelOrder(r).then(function(n){var r=p.$handleResponse(n,t);r&&!e.isFunction(r.then)&&p.$publish(o.EVENTS.ORDER_REFRESH)})})},y.config.batchvoid=function(){var e=o.PARTIALS_PATH+"batchVoidDialog.html";h.showDialogByUrl(e,function(e){e.eventHandler=function(t){t===!0&&(p.cancelOrder(),y.config.selectNum=0),e.close()}})},y.config.getPayUrl=function(e){var t=o.PAY_URL+e.orderId;return t};var S=a.getCurrentPageInfo();S.currentPage!==undefined&&(y.config.paginationInfo.pageSize=S.pageSize,y.config.paginationInfo.page=S.currentPage),b=i.getOrderList,this.initTableDef(null,{requestService:b,columns:y.columns,config:y.config}),this.actionCallback=function(n){var r=p.$handleResponse(n,t,!0);r&&!e.isFunction(r)&&(p.itemList=r.data||[],p.pageInfo=r.pageInfo)},this.updateRequestParams=function(t,n){var r=e.copy(a.getQueryModel());r.startTime||(r.startTime=r.startDateInit);var i=s.convertConsumptionListQueryModel(r);return!t.params&&(t.params={pageSize:y.config.paginationInfo.pageSize,currentPage:1}),t.params=e.extend(t.params,i),t.params.pageNum=t.params.currentPage>0?t.params.currentPage:1,delete t.params.currentPage,a.setCurrentPageInfo({pageSize:t.params.pageSize,currentPage:t.params.pageNum}),t},this.$on(o.EVENTS.QUERY_FLOW_GRID,function(e,t){a.setCurrentQueryModel(t),a.setCurrentPageInfo(),p.updateList()}),this.$on(o.EVENTS.ORDER_REFRESH,function(){p.refreshTableList()}),this.exportConfig={rawData:{confirmTitle:n.i18n("order.orderlist.export.confirm.title"),btnCls:"btn-link",btnText:n.i18n("order.orderlist.export.confirm.btn"),errorMsg:n.i18n("order.orderlist.export.confirm.errmsg"),btnIconCls:"",getFlowQueryModel:function(){return a.getQueryModel()},getBaseConfig:function(){return a.baseInitConfig}},validCheckService:"orderManageRequest",serviceName:"canExportOrder",onlyListen:!0}}t.controller("orderListController",f,"$$baseController"),f.$inject=["$injector","orderManageRequest","$scope","$timeout","$state","$stateParams","aliyunDialog"]}),define("expenseCenter/orderManage/controllers/_base",["./orderController","./orderDetailController","./orderListController"],function(){}),define("expenseCenter/orderManage/directives/directives",["angular","base/directives/directives","common/modelSystem/lazyModule"],function(e,t,n){var r=t;return n.makeLazy(r),r}),define("expenseCenter/orderManage/directives/payStatusForOrder",["./directives","angular","../cons/orderCons","base/helpers/monthHelper"],function(e,t,n,r){function i(e,t,n){this.$parent.$constructor.call(this,e);var r=this;this.order=e.order}function s(e){function t(e,t,n,r){}return{scope:{order:"="},controller:"payStatusForOrderManageController as vm",templateUrl:n.PARTIALS_PATH+"payStatusForOrderManage.html",link:t}}e.directive("payStatusForOrderManage",s).controller("payStatusForOrderManageController",i,"$$baseController"),s.$inject=["$compile"],i.$inject=["$scope","$injector","modelDefineService"]}),define("expenseCenter/orderManage/directives/exoprtFlowDetailDialog",["./directives","angular","i18nHelper","../cons/orderCons","base/cons/cons","base/helpers/monthHelper","base/utils/expenseCenterVariablesService","../helpers/queryModelHelper"],function(e,t,n,r,i,s,o,u){function a(e,n,a,f,l,c){function m(e){var t=["parentCommodityCode=",e.parentProductCode&&e.parentProductCode.code||"","&commodityCode=",e.productCode&&e.productCode.code||"","&orderType=",e.orderType&&e.orderType.value||"","&orderStatus=",e.payStatus&&e.payStatus.value||"","&startDate=",e.startTime&&e.startTime.getTime()||"","&endDate=",e.endTime&&e.endTime.getTime()||"","&verifyCode=",e.verifyCode].join("");return t}function g(e){var t=u.convertConsumptionListQueryModel(e);return t}this.$parent.$constructor.call(this,e);var h=this,p=e.rawData.getFlowQueryModel(),d=e.rawData.getBaseConfig();p.parentProducts=d.parentProductCodes,p.products=[];var v=e.exportModel||this.$getModel("orderListExportFormModel","FormModel")||null;this.showDialog=function(){var e=r.PARTIALS_PATH+"exportOrderListDialog.html",u=o.getKeyFromConstants("TODAY")||new Date;f.showDialogByUrl(e,function(e){e.rawData=t.copy(p);var r=e.rawData;e.exportOrderListFormModel=v,r.payStatusItems=d.payStatus,r.orderTypes=d.orderTypes,r.startDateInit=r.startTime||s.getFirstDayOfMonth(u),r.endTime=r.endTime||u,r.minDate=null,r.maxDate=u||new Date,r.startTime=null,r.disableExport=!0,r.remoteService=c,r.remoteAction={name:"verifyCodeInOldRequest",getActionParam:function(e,t){return{verifyCode:e.$modelValue}},needVerify:function(e,t){var n=e.$modelValue;return n===undefined||n.length<4||n.length>4?(r.disableExport=!0,{valid:!0}):!0},checkValidate:function(e){var s=h.$handleResponse(e,n,!0);return s&&!t.isFunction(s.then)?(s.data===!0?(r.disableVerifyCodeInput=!0,r.disableExport=!1):(h.$publish(i.EVENT.REFRESH_CAPTCHA_CODE,!0),r.verifyCode=""),s.data):!1}},r.whileReloadVerifyCode=function(){r.disableVerifyCodeInput=!1,r.verifyCode="",r.disableExport=!0};var o=!0;e.$watch("rawData.parentProductCode",function(e){r.products=e?e.children||[]:null,o==0&&(r.productCode=null),o=!1}),e.eventHandler=function(t){t===!0&&(h.doExport(e.rawData),e.close())}},{})},this.doExport=function(e){if(e){var t=m(e),n=r.EXPORT_URL.exportOrderUrl+"?"+t;window.ALIYUN_EXPENSECENTER_CONSOLE_CONFIG&&window.ALIYUN_EXPENSECENTER_CONSOLE_CONFIG.childUserId&&(n+="&childUserId="+window.ALIYUN_EXPENSECENTER_CONSOLE_CONFIG.childUserId),h.$publish(i.EVENT.EXPORT_CONFIRM_DO_EXPORT,{url:n,params:g(e)})}}}function f(){function e(e,t,n,r){t.on("click",function(t){t.preventDefault(),e.vm.showDialog()})}return{scope:{rawData:"="},controller:"exportOrderListController as vm",template:'<a style="padding-right:0px;margin-top:10px;" class="btn btn-link " href="javascript:;" >'+n.i18n("order.orderlist.export.confirm.btn")+"</a>",link:e}}e.directive("exportOrderListDialog",f).controller("exportOrderListController",a,"$$baseController"),a.$inject=["$scope","$injector","orderManageRequest","aliyunDialog","$q","commonRequest"]}),define("expenseCenter/orderManage/directives/orderSearchBar",["./directives","angular","../cons/orderCons","base/cons/cons"],function(e,t,n,r){function i(e,r,i){this.$parent.$constructor.call(this,e);var s=this;this.disableDateSelector=!1,t.extend(this,e.config),this.query=function(){if(typeof e.queryModel.parentProductCode=="undefined"||e.queryModel.parentProductCode==null||e.queryModel.parentProductCode.code!="ALIMAIL")e.queryModel.domainName=null;s.$publish(n.EVENTS.QUERY_FLOW_GRID,e.queryModel)},e.resetParam=function(e,t){i[e]=t}}function s(){function e(e,t,n,r){var i=!0;e.$watch("queryModel.parentProductCode",function(t){e.vm.productCodes=t?t.children||[]:null,i==0&&(e.queryModel.productCode=null),i=!1})}return{scope:{config:"=",queryModel:"="},controller:"orderManageSearchBarController as vm",templateUrl:n.PARTIALS_PATH+"searchBar.html",link:e}}e.directive("orderManageSearchBar",s).controller("orderManageSearchBarController",i,"$$baseController"),i.$inject=["$scope","$injector","$stateParams"]}),define("expenseCenter/orderManage/directives/cancelOrder",["./directives","angular","i18nHelper","../cons/orderCons"],function(e,t,n,r){function i(e,i,s,o,u){this.$parent.$constructor.call(this,e);var a=this;this.cancelOrder=function(e){var n={params:{orderId:e.orderId.toString()}};s.cancelOrder(n).then(function(e){var n=a.$handleResponse(e,i);n&&!t.isFunction(n.then)&&a.$publish(r.EVENTS.ORDER_REFRESH)})},this.showDialog=function(){var t=e.order;o.showMessageDialog({title:n.i18n("order.cancelorder.dialog.title"),message:n.i18n("order.cancelorder.dialog.msg",t.orderId)},function(e){e.eventHandler=function(n){n===!0&&a.cancelOrder(t),e.close()}},{})}}function s(){function e(e,t,n,r){t.on("click",function(t){t.preventDefault(),e.vm.showDialog()})}return{scope:{order:"="},controller:"cancelOrderController as vm",link:e}}e.directive("cancelOrder",s).controller("cancelOrderController",i,"$$baseController"),i.$inject=["$scope","$injector","orderManageRequest","aliyunDialog","$q"]}),define("expenseCenter/orderManage/directives/orderLineListForOrderManage",["./directives","angular","../cons/orderCons"],function(e,t,n){function r(e){if(e&&e.extraInfo){var t=e.extraInfo&&e.extraInfo.group||[];for(var r=0,i=null;i=t[r];r++)i.$dynamicInfoPanelModelName=n.ORDER_LINE_EXTRAINFO_CONS[i.groupName]}}function i(e,t,n){var r=e.instanceComponents;if(r)for(var i=0,s=null;s=r[i];i++)s=n(s,s.componentCode,t,e)}function s(e,n){function u(e,n){var s=[],u={};if(t.isArray(e))for(var a=0,f=null;f=e[a];a++)r(f),i(f,n,o),s.push(f);return s}this.$parent.$constructor.call(this,e);var s=this;s.orderLines=[],s.order=e.data;var o=n.get("$filter")("orderChargeItemFilterOfOrderManage");e.$watch("data",function(e){e&&(s.orderLines=u(e.orderLines,e))})}function o(){function e(e,t,n,r){}return{scope:{data:"="},controller:"orderLineListForOrderManageController as vm",templateUrl:n.PARTIALS_PATH+"orderLineList.html",link:e}}e.directive("orderLineListForOrderManage",o).controller("orderLineListForOrderManageController",s,"$$baseController"),s.$inject=["$scope","$injector"]}),define("expenseCenter/orderManage/directives/chargeFlowForOrderManage",["./directives","angular","../cons/orderCons"],function(e,t,n){function i(e,t,n,r){function u(e){return{page:e.currentPage,pageSize:e.pageSize,total:s.length}}function a(e,t){if(e!=undefined&&t!=undefined){var n=(e-1)*t,r=n+t,i=[],o=s;for(;n<r;n++){if(!o[n])return i;i.push(o[n])}return i}return s}function f(e){var t=[];if(e)for(var n=0,r=null;r=e[n];n++)r.fundsType*1!==5&&t.push(r);return t}this.$parent.$constructor.call(this,e);var i=this;e.inited=!1;var s=[],o=null;this.initGrid=function(l){var c=this.$getModel("orderPayJournalList","GridModel"),h=c.config.paginationInfo;o=h;var p={method:"GET",params:{orderId:e.rawData.orderId}};c.getGridData=function(e){o=e?u(e.params):o;var t=o.page,n=o.pageSize,r=a(t,n);return r},c.getPagination=function(){return o},c.config.goToPayJournalList=function(e,t){t=="ALIPAY"||t=="ALIPAY_HUABEI"?r.go("incomeExpense.alipay",{tradeNo:e}):t=="MYBANK"&&r.go("incomeExpense.mybank",{tradeNo:e})},n.getChargeFlowListOfOrder(p).then(function(e){var n=i.$handleResponse(e,t);n=f(n),s=n,o.total=n.length,s.length>h.pageSize?c.config.paginationSupport=!0:c.config.paginationSupport=!1,i.gridData=n,i.gridModel=c,l()})}}function s(e){function t(t,n,i,s){t.$watch("showChargeFlow",function(i){i===!0&&t.inited===!1&&t.vm.initGrid(function(){var i=r;n.append(i),e(n.contents())(t)})})}return{scope:{rawData:"=",bizType:"@",showChargeFlow:"="},controller:"chargeFlowListOfOrderManageController as vm",link:t}}e.directive("chargeFlowListOfOrderManage",s).controller("chargeFlowListOfOrderManageController",i,"$$baseController"),s.$inject=["$compile"],i.$inject=["$scope","$injector","orderManageRequest","$state"];var r='<div class="" item-grid grids-model="vm.gridModel" grid-data="vm.gridData" ></div>'}),define("expenseCenter/orderManage/directives/_base",["./directives","./payStatusForOrder","./exoprtFlowDetailDialog","./orderSearchBar","./cancelOrder","./orderLineListForOrderManage","./chargeFlowForOrderManage"],function(){}),define("expenseCenter/orderManage/filters/filters",["angular","base/filters/filters","common/modelSystem/lazyModule"],function(e,t,n){var r=t;return n.makeLazy(r),r}),define("commonBiz/orderChargeItemFilterService",["angular","i18nHelper"],function(e,t){function n(e,t){t.commodityCode&&(t.commodityCode.toLowerCase()=="vm"||t.commodityCode.toLowerCase()=="ecs")&&(e.componentName=null)}function r(e,n){n.commodityCode&&(n.commodityCode.toLowerCase()=="vm"||n.commodityCode.toLowerCase()=="ecs")&&(e.componentName=t.i18n("expense.base.common.yundun"))}function i(e){if(e)for(var t=0,n=null;n=e.properties[t];t++)if(n.code==="vm_os_kind"||n.code==="vm_os_bit")n.name=""}function s(e){if(e)for(var t=0,n=null;n=e.properties[t];t++){if(n.code=="yundisk_type"&&n.value=="disk_type_sys"){e.componentName="";return}if(n.code==="vm_snapshot_id"||n.code==="mount_point"||n.code==="yundisk_type")n.name=""}}function o(e,t){if(e&&t)for(var n=0,r=null;r=e.properties[n];n++){if(r.code=="ecsBandwidthTo"||r.code=="ecsBandwidthFrom")r.name="";if(t.commodityCode.toLowerCase()=="ecs"&&r.code=="vm_bandwidth"){var i=r.name.substring(r.name.length-4,r.name.length),s=r.name.substring(0,r.name.length-4),o=s/1024;r.name=o+i}}}function u(e,t,n){if(e&&t){var r=!0,i=n.instanceComponents;for(var s=0,o=null;o=i[s];s++)if(o.componentName=="流量")for(var u=0,a=null;a=o.properties[u];u++)if(a.name=="按使用流量计费"){r=!1,e.componentName=null;break}for(var s=0,f=null;f=e.properties[s];s++)r||(f.name="")}}function a(e){e&&e.componentCode=="rds_collocate"&&(e.componentName="")}function f(e){if(e&&e.componentCode=="rds_main")for(var t=0,n=null;n=e.properties[t];t++)n.code=="rds_id"&&(n.name="")}function l(e,t){var n=t.get("$filter"),r=n("aliyunDateFormatter");return e*1==e*1?(e*=1,r(e)):e}function c(e,t){var n=t.get("$filter"),r=n("aliyunDateFormatter");return e*1==e*1&&(e*=1),r(e)}return{vm_yundun_monitor:n,vm_yundun_service:r,vm_os:i,eip_bandwidth_max:u,vm_yundisk_storage:s,vm_bandwidth:o,rds_collocate:a,expectedRestartTime:l,gmt_release:c,rds_main:f}}),define("expenseCenter/orderManage/filters/orderStatusFilter",["./filters","../cons/orderCons","commonBiz/orderChargeItemFilterService"],function(e,t,n){e.filter("orderStatusFilter",[function(){return function(e,n){return n?t.STATUS[n][e]:e}}]),e.filter("orderDetailExtraInfoFilter",[function(){return function(e,n){return n?t.ORDER_EXTRA_INFO[n][e]||e:e}}]),e.filter("orderDetailExtraInfoValueFilter",["$injector",function(e){var t=n;return function(n,r){var i=t[r];return i(n,e)||n}}])}),define("expenseCenter/orderManage/filters/productName",["./filters","../cons/orderCons","../helpers/productHelper"],function(e,t,n){var r=t.STATUS;e.filter("productNameFilter",[function(){function t(t,n){var r=e[t]||{};return r.name||""}function r(t,n){var r=e[t]||{},i=r.name,s=r.parentCode||"",o=e[s]||{},u=o.name||"";return['<div class="parent-product-name">',u,"</div>",'<div class="product-name">',i,"</div>"].join("")}function i(t,n){var r=e[t]||{},i=r.name;return(!t||t.toLowerCase()=="cloudmarket")&&n&&n!=""&&(i=n),['<div class="product-name">',i,"</div>"].join("")}var e=n.getAllProducts();return function(e,n,s){var o=function(){};n+="";switch(n){case"undefined":case"htmlname":o=i;break;case"fullhtmlname":o=r;break;case"textname":o=t}return o(e,s)||e}}])}),define("expenseCenter/orderManage/filters/orderChargeItemFilter",["./filters","commonBiz/orderChargeItemFilterService"],function(e,t){e.filter("orderChargeItemFilterOfOrderManage",[function(){return function(e,n,r,i){var s=t[n];return angular.isFunction(s)&&s(e,r,i),e}}])}),define("expenseCenter/orderManage/filters/_base",["./orderStatusFilter","./productName","./orderChargeItemFilter"],function(){}),define("expenseCenter/orderManage/models/detail/orderChargeFlowListGridModel",["angular","common/modelSystem/modelFactory","../../cons/orderCons","i18nHelper"],function(e,t,n,r){var i={columns:[{name:r.i18n("order.model.detail.billid"),field:"billId"},{name:r.i18n("order.model.detail.fundtype"),fieldDirective:"<div bo-text=\"item.fundsType|orderStatusFilter:'chargflow'\"></div>"},{name:r.i18n("order.model.detail.amount"),cssProperty:"text-right consumption-flow-fee-column",fieldDirective:'<span class="text-warning"><span bo-text="item.amount|moneyFilter"></span></span>'},{name:r.i18n("order.model.detail.paytime"),fieldDirective:'<span bo-bind="item.payTime|aliyunDateFormatter"></span>'}],config:{filterItems:{classId:[]},useBindOnce:!0,paginationSupport:!0,paginationInfo:{pageSize:10,page:1,showPageGoto:!1},noneDataInfoDirective:'grid-no-data-msg cls="grid-no-data-sm" msg="'+r.i18n("order.model.detail.nodatamsg")+'"'}};t.grid("orderManageChargeFlowList",i)}),define("expenseCenter/orderManage/models/detail/orderPayJournalGridModel",["angular","common/modelSystem/modelFactory","../../cons/orderCons","i18nHelper"],function(e,t,n,r){var i={columns:[{name:"支付渠道",field:"writeoffTypeName"},{name:r.i18n("order.model.detail.amount"),cssProperty:"text-right consumption-flow-fee-column",fieldDirective:'<span class="text-warning"><span bo-text="item.amount|moneyFilter"></span></span>'},{name:r.i18n("order.model.detail.paytime"),fieldDirective:'<span bo-bind="item.writeoffTime|aliyunDateFormatter"></span>'},{name:r.i18n("order.model.detail.billid"),fieldDirective:'<a href="javascript:;" ng-click="config.goToPayJournalList(item.tradeNo,item.writeoffType)"  ng-if="item.writeoffType==\'ALIPAY\'||item.writeoffType==\'MYBANK\'||item.writeoffType==\'ALIPAY_HUABEI\'"><span  class="nowrap" bo-bind="item.tradeNo"></span></a><span ng-if="item.writeoffType!=\'ALIPAY\'&&item.writeoffType!=\'MYBANK\'&&item.writeoffType!=\'ALIPAY_HUABEI\'"  class="nowrap" bo-bind="item.tradeNo"></span>'},{name:"支付账号",fieldDirective:'<span bo-bind="item.payerAccountName"></span>'}],config:{filterItems:{classId:[]},useBindOnce:!0,paginationSupport:!0,paginationInfo:{pageSize:10,page:1,showPageGoto:!1},noneDataInfoDirective:'grid-no-data-msg cls="grid-no-data-sm" msg="'+r.i18n("order.model.detail.nodatamsg")+'"'}};t.grid("orderPayJournalList",i)}),define("expenseCenter/orderManage/models/detail/orderLineDetailGridModel",["angular","common/modelSystem/modelFactory","i18nHelper"],function(e,t,n){var r={columns:[{name:n.i18n("order.model.detail.product"),fieldDirective:'<span class="nowrap" bo-text="item.commodityName"></span><span class="nowrap" bo-text="item.billEndTime"></span>'},{name:n.i18n("order.model.detail.num"),cssProperty:"title-column",fieldDirective:'<div bo-text="item.quantity"></div>'},{name:n.i18n("order.model.detail.info"),fieldDirective:['<div ng-repeat="instance in item.instanceComponents">','<span class="instance-property-label" bo-bind="instance.componentName"></span>：','<span class="nowrap instance-property-value" ng-repeat="property in instance.properties" >','<span bo-bind="property.name"></span>',"</span>","</div>"].join("")},{name:n.i18n("order.model.detail.paytype"),fieldDirective:[n.i18n("order.model.detail.as")+'<span bo-bind="item.pricingCycle|orderStatusFilter:\'pricingCycle\'"></span><span ng-if="item.duration != \'\'">：<span bo-bind="item.duration"></span><span bo-bind="item.pricingCycle|orderStatusFilter:\'pricingCycle\'"></span></span>'].join("")},{name:n.i18n("order.model.detail.price"),field:"tradeAmount",fieldDirective:'<span >¥</span><span bo-bind="item.tradeAmount"></span><span bo-bind="item.tradeAmountUnit"></span>'}],config:{filterItems:{classId:[]},useBindOnce:!0,paginationSupport:!1,tfootPositionFixed:!0,noneDataInfoDirective:"none-data-info-msg"}};t.grid("orderLineDetailList",r)}),define("expenseCenter/orderManage/models/export/exportOrderListModel",["angular","common/modelSystem/modelFactory","i18nHelper"],function(e,t,n){t.form("orderListExportFormModel",{layout:"",name:"orderListExportForm",fields:[{name:"parentProductCode",label:n.i18n("order.model.detail.product"),type:"select",fieldCls:"",ngOptions:'ng-options="item.name for item in rawData.parentProducts track by item.code"',defaultOption:n.i18n("order.model.export.product.all"),fieldSpan:8},{name:"productCode",label:n.i18n("order.model.export.productcode"),type:"select",fieldCls:"",ngOptions:'ng-options="item.name for item in rawData.products track by item.code"',defaultOption:n.i18n("order.model.export.productcode.all"),fieldSpan:8},{name:"orderType",label:n.i18n("order.model.export.ordertype"),type:"select",fieldCls:"",ngOptions:'ng-options="item.name for item in rawData.orderTypes track by item.value"',defaultOption:n.i18n("order.model.export.ordertype.all"),fieldSpan:8},{name:"payStatus",label:n.i18n("order.model.export.paystatus"),type:"select",fieldCls:"",ngOptions:'ng-options="item.name for item in rawData.payStatusItems track by item.value"',defaultOption:n.i18n("order.model.export.paystatus.all"),fieldSpan:8},{name:"time",label:n.i18n("order.model.export.time"),type:"customField",fieldSpan:8,template:['<div style="width:320px;">',"<div date-step-unit ",'readonly-date-selector="false"','strict-limit="true"','min-date="rawData.minDate"','max-date="rawData.maxDate"','start-date="rawData.startTime"','end-date="rawData.endTime"','start-date-init="rawData.startDateInit"','init-time="true"',"display-mode=\"'h-m-s'\"",'class="inline-block margin-right-1" >',"</div></div>"].join(" ")},{name:"verifyCode",label:n.i18n("order.model.export.verifycode"),type:"customField",fieldSpan:8,fieldCls:"",template:['<div class="row">','<div class="col-sm-4">',' <input name="verifyCodeField" ng-disabled="rawData.disableVerifyCodeInput"','   ng-model="rawData.verifyCode" ','   class="form-control" ',"   remote-validator ",'   remote-service="rawData.remoteService" remote-action="rawData.remoteAction" />',"</div>",'<div class="col-sm-8"><span ng-click="rawData.whileReloadVerifyCode()" captcha-code></span></div>',"</div>",'<div style="padding-left:0px;" class="help-block col-sm-12" ng-show="orderListExportForm.verifyCodeField.$dirty && orderListExportForm.verifyCodeField.$invalid">','<div class="error text-danger" >','<span class="icon-no-2 rds-database-icon"></span>',"<span>"+n.i18n("order.model.export.verifycode.errmsg")+"</span>","</div>","</div>"].join("")}]})}),define("expenseCenter/orderManage/models/orderListGridModel",["angular","common/modelSystem/modelFactory","../cons/orderCons","i18nHelper"],function(e,t,n,r){var i={columns:[{name:r.i18n("order.model.list.orderid"),field:"orderId",cssProperty:"nowrap"},{name:r.i18n("order.model.detail.product"),cssProperty:"title-column",htmlField:!0,fieldDirective:'<span ng-if="item.commodityCode!= \'alimail\'" bo-html="item.displayCommodityCode|productNameFilter:\'htmlname\':item.commodityName"></span><span ng-if="item.commodityCode == \'alimail\'" bo-html="item.specName"></span>'},{name:r.i18n("order.model.list.ordertype"),fieldDirective:'<span class="column-text" bo-text="item.orderType|orderStatusFilter:\'orderType\'" ></span>'},{name:r.i18n("order.model.list.gmtcreate"),cssProperty:"nowrap",fieldDirective:'<div class="nowrap" bo-text="item.gmtCreate|date:\'yyyy-MM-dd\'"></div><div class="nowrap" bo-text="item.gmtCreate|date:\'HH:mm:ss\'"></div>'},{name:r.i18n("order.model.list.time.pay_open"),cssProperty:"nowrap",fieldDirective:'<div class="nowrap" bo-text="item.gmtPay|date:\'yyyy-MM-dd\'"></div><div class="nowrap" bo-text="item.gmtPay|date:\'HH:mm:ss\'"></div>'},{name:r.i18n("order.model.list.status"),fieldDirective:'<div class="nowrap" bo-html="item.orderStatus|orderStatusFilter:\'order\'"></div>'},{name:r.i18n("order.model.list.originalamount"),cssProperty:"text-right",fieldDirective:'<span class="text-warning"><span bo-text="item.originalAmount|moneyFilter"></span></span>'},{name:r.i18n("order.model.list.cash"),cssProperty:"text-right",fieldDirective:'<span class="text-warning"><span bo-text="item.tradeAmount|moneyFilter"></span></span>'},{name:r.i18n("order.model.list.domainName"),cssProperty:"text-right email-domain",fieldDirective:'<span class="text-warning"><span bo-text="item.extend3"></span></span>'},{name:r.i18n("order.cm.operate"),cssProperty:"text-right",fieldDirective:'<a aliyun-console-spm="1" class="" href="javascript:;" ng-click="config.goToDetailView(item)" >'+r.i18n("order.model.list.detail")+'</a><span class="order-status" ng-if="item.orderStatus == \'UNPAID\'"> '+'<span class="text-explode">|</span> <a aliyun-console-spm="2" href="javascript:;" ng-href="{{config.getPayUrl(item)}}" target="_blank" >'+r.i18n("order.model.list.pay")+"</a>"+'<span class="text-explode">|</span> <a aliyun-console-spm="3"  cancel-order order="item" class="" href="javascript:;" " >'+r.i18n("order.model.list.invalid")+"</a></span>"}],config:{filterItems:{classId:[]},useBindOnce:!0,paginationSupport:!0,tfootPositionFixed:!0,selectedProperty:"selected",selectedScopeProperty:"selectedItems",noneDataInfoDirective:'grid-no-data-msg msg="'+r.i18n("order.model.list.nodatamsg")+'"',batchOperationBarDirective:'<button  ng-if="config.selectNum>0" selected-items="selectedItems"  raw-data="selectedItems"  style=" height: 30px; text-align:center" class="btn btn-default" ng-click="config.batchpay()" >'+r.i18n("order.views.batchpay")+'</button> &nbsp&nbsp&nbsp&nbsp <button ng-if="config.selectNum>0" selected-items="selectedItems" style=" height: 30px; text-align:center" class="btn btn-default" ng-click="config.batchvoid()">'+r.i18n("order.views.batchvoid")+"</button>  ",batchOperationBarDirective:'<button ng-if="config.selectNum>0" selected-items="selectedItems" style=" height: 30px; text-align:center" class="btn btn-default" ng-click="config.batchvoid()">'+r.i18n("order.views.batchvoid")+"</button>  ",checkboxSupport:!0,checkboxDisabledProperty:"orderStatus != 'UNPAID'",paginationInfo:{pageSize:20,page:1,showPageGoto:!0}}};t.grid("orderListGridModel",i)}),define("expenseCenter/orderManage/models/orderDetailExtraInfoModel",["angular","common/modelSystem/modelFactory","../cons/orderCons"],function(e,t,n){t.regist("orderDetailExtraInfoCommonModel","DynamicInfoModel",{templateUrl:n.PARTIALS_PATH+"orderDetailExtraInfoCommonView.html",setCompileData:function(e,t,n,r){e.vm={groups:t.extraInfo.group}}})}),define("expenseCenter/orderManage/models/orderLineExtraInfoModels/dynamicModelForChangeInfo",["angular","common/modelSystem/modelFactory","../../cons/orderCons"],function(e,t,n){t.regist("dynamicModelForChangeInfoOfOrderManage","DynamicInfoModel",{templateUrl:n.PARTIALS_PATH+"orderLineExtraInfoPartials/changeInfo.html",setCompileData:function(e,t,n,r){function o(e){return e.componentCode=="rds_collocate"?!1:!0}function u(e){var t={};if(e&&e.length>0){var n=e.length;for(var r=0,i=null;i=e[r];r++){var u=i.componentCode;o(i)&&(t[u]||(t[u]=[]),i=s(i,i.componentCode),t[u].push(i))}}return t}function a(e,t){var e=u(e),t=u(t),n=[];for(var r in e)e.hasOwnProperty(r)&&(n.push({fromConfig:e[r],toConfig:t[r]||null}),delete t[r]);for(var r in t)t.hasOwnProperty(r)&&n.push({fromConfig:null,toConfig:t[r]});return n}function f(e){var t=[];if(e){var n=e.items[0]||null;if(n)var r=n.change_from_config,i=n.change_to_config,t=a(r,i)}return t}var i=[],s=r.get("$filter")("orderChargeItemFilterOfOrderManage");e.vm={title:t.groupName,changedConfigs:f(t)}}})}),define("expenseCenter/orderManage/models/orderLineExtraInfoModels/dynamicModelForExtraOrderInfo",["angular","common/modelSystem/modelFactory","../../cons/orderCons"],function(e,t,n){t.regist("dynamicModelForExtraOrderInfoOfOrderManage","DynamicInfoModel",{templateUrl:n.PARTIALS_PATH+"orderLineExtraInfoPartials/otherExtraInfo.html",setCompileData:function(e,t,n,r){var i=[];if(t){var s=t.items||[];if(s&&s.length>0)for(var o=0,u=null;u=s[o];o++)for(var a in u)u.hasOwnProperty(a)&&i.push({key:a,value:u[a]})}e.vm={infos:i}}})}),define("expenseCenter/orderManage/models/orderLineExtraInfoModels/dynamicModelForRenewTime",["angular","common/modelSystem/modelFactory","../../cons/orderCons"],function(e,t,n){t.regist("dynamicModelForRenewTimeOfOrderManage","DynamicInfoModel",{templateUrl:n.PARTIALS_PATH+"orderLineExtraInfoPartials/renewTimeInfo.html",setCompileData:function(e,t,n,r){var i=[];t&&(i=t.items||[]),e.vm={infos:i}}})}),define("expenseCenter/orderManage/models/_base",["./detail/orderChargeFlowListGridModel","./detail/orderPayJournalGridModel","./detail/orderLineDetailGridModel","./export/exportOrderListModel","./orderListGridModel","./orderDetailExtraInfoModel","./orderLineExtraInfoModels/dynamicModelForChangeInfo","./orderLineExtraInfoModels/dynamicModelForExtraOrderInfo","./orderLineExtraInfoModels/dynamicModelForRenewTime"],function(){}),define("expenseCenter/orderManage/services/services",["angular","base/services/services","common/modelSystem/lazyModule"],function(e,t,n){var r=t;return n.makeLazy(r),r}),define("expenseCenter/orderManage/services/ecsmConsoleService",["./services","common/cons/aliyunCons"],function(e,t){var n=t.RESPONSE_CODE;e.factory("aliyun.console.request.ecsm",["aliyun.console.requestWrapper","growl","$q","aliyunCommonTopicService","aliyunConsoleSetting",function(e,t,r,i,s){function o(o,u){u=u||{};var o=s.linkHandler(o);if(u&&u.method){var a=u.method.toUpperCase();a=="POST"&&(u.data==undefined&&(u.data={}),s.httpOptionInterceptor(u))}else u.method="GET";return u&&u.submitMessage&&t.addSuccessMessage(u.submitMessage),s.httpOptionWrapper(u),window.ALIYUN_EXPENSECENTER_CONSOLE_CONFIG.childUserId&&(u.method=="GET"&&(u.params||(u.params={}),u.params.childUserId=window.ALIYUN_EXPENSECENTER_CONSOLE_CONFIG.childUserId),u.method=="POST"&&(u.data||(u.data={}),u.data.childUserId=window.ALIYUN_EXPENSECENTER_CONSOLE_CONFIG.childUserId)),e.sendRequestWithUrl(o,u).then(function(e){var r=e.data,i=e.config;return i&&r&&r.code==n.SUCCESS&&i.successMessage!=undefined&&t.addSuccessMessage(i.successMessage),e},function(e){return u&&u.ignoreErrorHandler&&u.ignoreErrorHandler==1?r.reject(e):(console.log(e),e.status!==n.HTTP_SUCCESS&&i.publish(SHOW_RESPONSE_ERROR_MESSAGE,s.labels.RESPONSE_ERROR),r.reject(e))})}return{request:o}}])}),define("expenseCenter/orderManage/services/ordersService",["./services","common/services/aliyunHttpHandler","./ecsmConsoleService"],function(e){e.factory("orderManageRequest",["aliyun.console.request","aliyun.console.request.ecsm",function(e,t){var n=e.request;window.ALIYUN_EXPENSECENTER_CONSOLE_CONFIG.childUserId&&(n=t.request);var r={getOrderList:function(e){var e=e||{method:"GET"};return n("/order/getOrderList.json",e)},getOrderDetailInfo:function(e){var e=e||{method:"GET"};return n("/consumption/getOrderDetail.json",e)},getMarketOrderDetailInfo:function(e){var e=e||{method:"GET"};return n("/consumption/getOrderDetailForMarket.json",e)},getOverdueAmount:function(){var e=e||{method:"GET"};return n("/order/getOverdueAmount.json",e)},getChargeFlowListOfOrder:function(e){var e=e||{method:"GET"};return n("/consumption/getOrderPayJournal.json",e)},canExportOrder:function(e){var e=e||{method:"GET"};return n("/order/canExport.json",e)},cancelOrder:function(e){var e=e||{method:"POST"};return e.method="POST",e.successMessage="",n("/order/cancel.json",e)}};return r}])}),define("expenseCenter/orderManage/services/_base",["./ordersService"],function(){}),define("expenseCenter/orderManage/index",["./orderManage-tpl","./helpers/_base","./controllers/_base","./directives/_base","./filters/_base","./models/_base","./services/_base"],function(){}),require(["expenseCenter/orderManage/index"]);